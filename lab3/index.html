<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ #3 ‚Äî –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º</title>
    <link rel="stylesheet" href="../css/reset.css" />
    <link rel="stylesheet" href="../css/variables.css" />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="./index.css" />
</head>
<body>
    <script src="../partials/header.js"></script>

    <main class="main">
        <div class="lab-content">
            <div class="title">
                <h1>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ #3</h1>
                <p style="text-align: center;">–ò–∑—É—á–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ñ–æ—Ä–º–∞–º–∏ –∏ –∏—Ö —Å–æ–±—ã—Ç–∏—è–º–∏, –æ—Å–≤–æ–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Constraint Validation API.</p>
            </div>

            <div class="task task3">
                <h3>1. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã</h3>
                <p>
                    –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞
                    //code>dialog>code// . –í—Å–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é.
                    –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤.
                    –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Äî —á–µ—Ä–µ–∑ HTML5-–∞—Ç—Ä–∏–±—É—Ç—ã –∏ –∫–∞—Å—Ç–æ–º–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —Å –ø–æ–º–æ—â—å—é JavaScript.
                    –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–ª–Ω—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º—ã (aria-–∞—Ç—Ä–∏–±—É—Ç—ã, —Ñ–æ–∫—É—Å, –∂–∏–≤—ã–µ —Ä–µ–≥–∏–æ–Ω—ã).
                </p>

                <div class="solution-wrapper">
                    <h3 class="solution-title">–†–µ—à–µ–Ω–∏–µ:</h3>
                    <div class="task-solution">
                        <button id="openModalBtn" class="register-btn">–û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</button>

                        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
                        <dialog id="registrationModal" class="modal">
                            <div class="modal-content">
                                <header class="modal-header">
                                    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                                    <button id="closeModalBtn" class="close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
                                </header>
                                <form id="registrationForm" novalidate>
                                    <div class="form-group">
                                        <label for="name">–ò–º—è <span>(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span></label>
                                        <input type="text" id="name" name="name" required aria-describedby="name-error" />
                                        <div id="name-error" class="error-message" role="alert" aria-live="polite" hidden></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="email">Email <span>(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span></label>
                                        <input type="email" id="email" name="email" required aria-describedby="email-error" />
                                        <div id="email-error" class="error-message" role="alert" aria-live="polite" hidden></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="password">–ü–∞—Ä–æ–ª—å <span>(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)</span></label>
                                        <div class="password-field">
                                            <input type="password" id="password" name="password" required minlength="6" aria-describedby="password-error" />
                                            <button type="button" id="togglePasswordBtn" class="toggle-password-btn" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å">üëÅÔ∏è</button>
                                        </div>
                                        <div id="password-error" class="error-message" role="alert" aria-live="polite" hidden></div>
                                    </div>

                                    <div class="form-actions">
                                        <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                                        <button type="button" id="cancelModalBtn">–û—Ç–º–µ–Ω–∞</button>
                                    </div>
                                </form>
                            </div>
                        </dialog>
                    </div>
                </div>

                <div class="solution-wrapper">
                    <h3 class="solution-title">–ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏:</h3>
                    <button
                        id="toggleCodeBtn"
                        class="toggle-code-btn"
                        onclick="toggleFunctionCode('functionCode', 'toggleCodeBtn')"
                    >
                        –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–¥
                    </button>
                    <pre id="functionCode" class="code-block hidden">
document.addEventListener('DOMContentLoaded', function () {
    const openModalBtn = document.getElementById('openModalBtn');
    const closeModalBtn = document.getElementById('closeModalBtn');
    const cancelModalBtn = document.getElementById('cancelModalBtn');
    const registrationModal = document.getElementById('registrationModal');
    const registrationForm = document.getElementById('registrationForm');
    const togglePasswordBtn = document.getElementById('togglePasswordBtn');
    const passwordInput = document.getElementById('password');

    let isPasswordVisible = false;

    openModalBtn.addEventListener('click', () => {
        registrationModal.showModal();
        document.getElementById('name').focus();
    });

    const closeModal = () => registrationModal.close();
    closeModalBtn.addEventListener('click', closeModal);
    cancelModalBtn.addEventListener('click', closeModal);

    registrationModal.addEventListener('click', (e) => {
        if (e.target === registrationModal) closeModal();
    });

    const hidePassword = () => {
        if (isPasswordVisible) {
            passwordInput.type = 'password';
            isPasswordVisible = false;
            togglePasswordBtn.setAttribute('aria-label', '–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å');
        }
    };

    togglePasswordBtn.addEventListener('pointerdown', (e) => {
        e.preventDefault();
        passwordInput.type = 'text';
        isPasswordVisible = true;
        togglePasswordBtn.setAttribute('aria-label', '–°–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å');
    });

    togglePasswordBtn.addEventListener('pointerup', hidePassword);
    togglePasswordBtn.addEventListener('pointerleave', hidePassword);

    const validateField = (field) => {
        const errorElement = document.getElementById(field.id + '-error');
        const isValid = field.checkValidity();

        if (!isValid) {
            field.classList.add('invalid');
            field.classList.remove('valid');
            field.setAttribute('aria-invalid', 'true');
            errorElement.textContent = field.validationMessage;
            errorElement.hidden = false;
        } else {
            field.classList.add('valid');
            field.classList.remove('invalid');
            field.removeAttribute('aria-invalid');
            errorElement.hidden = true;
            errorElement.textContent = '';
        }
        return isValid;
    };

    registrationForm.querySelectorAll('input').forEach((input) => {
        input.addEventListener('blur', () => validateField(input));
    });

    registrationForm.addEventListener('submit', (e) => {
        e.preventDefault();
        let isValid = true;
        registrationForm.querySelectorAll('input').forEach((input) => {
            if (!validateField(input)) isValid = false;
        });

        if (isValid) {
            const formData = new FormData(registrationForm);
            console.log('–î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã:', Object.fromEntries(formData.entries()));
            alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!');
            registrationForm.reset();
            registrationForm.querySelectorAll('input').forEach((input) => {
                input.classList.remove('valid', 'invalid');
                input.removeAttribute('aria-invalid');
            });
            closeModal();
        } else {
            const firstInvalid = registrationForm.querySelector('.invalid');
            if (firstInvalid) firstInvalid.focus();
        }
    });
});</pre>
                </div>
            </div>
        </div>
    </main>

    <script src="../partials/footer.js"></script>

    <script src="./index.js"></script>
        <script src="../index.js"></script>

</body>
</html>