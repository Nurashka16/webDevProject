<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Лабораторная работа #2 — DOM и события</title>
    <link rel="stylesheet" href="../css/reset.css" />
    <link rel="stylesheet" href="../css/variables.css" />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="./index.css" />
    <link rel="stylesheet" href="./tasks/task1/task1.css" />
    <link rel="stylesheet" href="./tasks/task2/task2.css" />
    <link rel="stylesheet" href="./tasks/task3/task3.css" />
    <link rel="stylesheet" href="./tasks/task4/task4.css" />
    <link rel="stylesheet" href="./tasks/task5/task5.css" />
  </head>
  <body>
    <script src="../partials/header.js"></script>

    <main class="main">
      <div class="lab-content">
        <div class="title">
          <h1>Лабораторная работа #2</h1>
          <p>
            Изучить DOM, события и их обработку, взаимосвязь и способы
            манипуляций с объектами дерева.
          </p>
        </div>

        <!-- Task 1 -->
        <div class="task task1">
          <h3>1. Like</h3>
          <p>Реализовать кнопку с иконкой пальца вверх или сердечка...</p>

          <div class="solution-wrapper">
            <h3 class="solution-title">Решение:</h3>
            <div class="task-solution task1-solution">
              <button
                id="likeBtn"
                class="like-btn"
                aria-label="Поставить лайк"
                aria-pressed="false"
              >
                <svg
                  class="like-icon"
                  xmlns="http://www.w3.org/2000/svg"
                  width="32"
                  height="32"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                  ></path>
                </svg>
              </button>
            </div>
          </div>

          <div class="solution-wrapper">
            <h3 class="solution-title">Код функции:</h3>
            <button
              id="toggleCodeBtn1"
              class="toggle-code-btn"
              onclick="toggleFunctionCode('functionCode1', 'toggleCodeBtn1')"
            >
              Показать код
            </button>
            <pre id="functionCode1" class="code-block hidden">
function toggleLike() {
    const likeBtn = document.getElementById('likeBtn');
    const isLiked = likeBtn.classList.contains('active');
    if (isLiked) {
        likeBtn.classList.remove('active');
        likeBtn.setAttribute('aria-pressed', 'false');
    } else {
        likeBtn.classList.add('active');
        likeBtn.setAttribute('aria-pressed', 'true');
    }
}</pre
            >
          </div>
        </div>

        <!-- Task 2 -->
        <div class="task task2">
          <h3>2. Like / Dislike</h3>
          <p>Повторите кнопку из прошлого задания, но добавьте вторую...</p>

          <div class="solution-wrapper">
            <h3 class="solution-title">Решение:</h3>
            <div class="task-solution task2-solution">
              <button
                id="likeBtn2"
                class="like-btn2 active"
                aria-label="Поставить лайк"
                aria-pressed="false"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="32"
                  height="32"
                  fill="currentColor"
                  class="like-icon2"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"
                  />
                  <path
                    d="M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5"
                  />
                </svg>
              </button>
              <button
                id="dislikeBtn2"
                class="dislike-btn2"
                aria-label="Поставить дизлайк"
                aria-pressed="false"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="32"
                  height="32"
                  fill="currentColor"
                  class="dislike-icon2"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"
                  />
                  <path
                    d="M4.285 12.433a.5.5 0 0 0 .683-.183A3.5 3.5 0 0 1 8 10.5c1.295 0 2.426.703 3.032 1.75a.5.5 0 0 0 .866-.5A4.5 4.5 0 0 0 8 9.5a4.5 4.5 0 0 0-3.898 2.25.5.5 0 0 0 .183.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5"
                  />
                </svg>
              </button>
            </div>
          </div>

          <div class="solution-wrapper">
            <h3 class="solution-title">Код функции:</h3>
            <button
              id="toggleCodeBtn2"
              class="toggle-code-btn"
              onclick="toggleFunctionCode('functionCode2', 'toggleCodeBtn2')"
            >
              Показать код
            </button>
            <pre id="functionCode2" class="code-block hidden">
function toggleLikeDislike(type) {
    const likeBtn = document.getElementById('likeBtn2');
    const dislikeBtn = document.getElementById('dislikeBtn2');

    if (type === 'like') {
        if (likeBtn.classList.contains('active')) {
            likeBtn.classList.remove('active');
            likeBtn.setAttribute('aria-pressed', 'false');
        } else {
            likeBtn.classList.add('active');
            likeBtn.setAttribute('aria-pressed', 'true');
            dislikeBtn.classList.remove('active');
            dislikeBtn.setAttribute('aria-pressed', 'false');
        }
    } else if (type === 'dislike') {
        if (dislikeBtn.classList.contains('active')) {
            dislikeBtn.classList.remove('active');
            dislikeBtn.setAttribute('aria-pressed', 'false');
        } else {
            dislikeBtn.classList.add('active');
            dislikeBtn.setAttribute('aria-pressed', 'true');
            likeBtn.classList.remove('active');
            likeBtn.setAttribute('aria-pressed', 'false');
        }
    }
}</pre
            >
          </div>
        </div>

        <!-- Task 3 -->
        <div class="task task3">
          <h3>3. Корзина</h3>
          <p>Сделайте несколько простых карточек с изображением...</p>

          <div class="solution-wrapper">
            <h3 class="solution-title">Решение:</h3>
            <div class="task-solution task3-solution">
              <div class="cart-header">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="currentColor"
                  class="cart-icon"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.88 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"
                  />
                </svg>
                <span id="cartCounter" class="cart-counter">0</span>
              </div>
              <div class="products-container">
                <div class="product-card">
                  <img
                    src="https://www.adverti.ru/media/catalog/product/1/6/16614.30_14.jpg"
                    alt="Футболка"
                  />
                  <p>Футболка</p>
                  <button class="add-to-cart-btn" data-id="1">В корзину</button>
                </div>
                <div class="product-card">
                  <img
                    src="https://campus78.ru/wp-content/uploads/2024/06/dsc-8-2-scaled.jpg"
                    alt="Шорты"
                  />
                  <p>Шорты</p>
                  <button class="add-to-cart-btn" data-id="2">В корзину</button>
                </div>
              </div>
            </div>
          </div>

          <div class="solution-wrapper">
            <h3 class="solution-title">Код функции:</h3>
            <button
              id="toggleCodeBtn3"
              class="toggle-code-btn"
              onclick="toggleFunctionCode('functionCode3', 'toggleCodeBtn3')"
            >
              Показать код
            </button>
            <pre id="functionCode3" class="code-block hidden">
let cartCount = 0;

function updateCartCounter() {
    const counter = document.getElementById('cartCounter');
    if (counter) counter.textContent = cartCount;
}

function addToCart(button) {
    cartCount++;
    updateCartCounter();
    button.classList.add('added');
    setTimeout(() => button.classList.remove('added'), 300);
}

document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
        btn.addEventListener('click', e => addToCart(e.target));
    });
})</pre
            >
          </div>
        </div>

        <!-- Task 4 -->
        <div class="task task4">
          <h3>4. Сортировка</h3>
          <p>Добавьте три кнопки для сортировки...</p>

          <div class="solution-wrapper">
            <h3 class="solution-title">Решение:</h3>
            <div class="task-solution task4-solution">
              <div class="sort-controls">
                <button id="sortAscBtn" class="solve-btn">
                  По возрастанию
                </button>
                <button id="sortDescBtn" class="solve-btn">По убыванию</button>
                <button id="sortResetBtn" class="solve-btn">
                  Исходный порядок
                </button>
              </div>
              <ul id="numberList" class="number-list"></ul>
            </div>
          </div>

          <div class="solution-wrapper">
            <h3 class="solution-title">Код функции:</h3>
            <button
              id="toggleCodeBtn4"
              class="toggle-code-btn"
              onclick="toggleFunctionCode('functionCode4', 'toggleCodeBtn4')"
            >
              Показать код
            </button>
            <pre id="functionCode4" class="code-block hidden">
let numbers = [42, 15, 7, 88, 23, 91, 5, 34];
let currentNumbers = [...numbers];

function renderNumbers(arr) {
    const list = document.getElementById('numberList');
    list.innerHTML = '';
    arr.forEach(num => {
        const li = document.createElement('li');
        li.textContent = num;
        list.appendChild(li);
    });
    currentNumbers = [...arr];
}

function sortAsc() {
    const sorted = [...currentNumbers].sort((a, b) => a - b);
    renderNumbers(sorted);
}

function sortDesc() {
    const sorted = [...currentNumbers].sort((a, b) => b - a);
    renderNumbers(sorted);
}

function sortReset() {
    renderNumbers(numbers);
}</pre
            >
          </div>
        </div>

        <!-- Task 5 -->
        <div class="task task5">
          <h3>5. Координаты</h3>
          <p>При любом нажатии указателем выводить координаты...</p>

          <div class="solution-wrapper">
            <h3 class="solution-title">Решение:</h3>
            <div class="task-solution task5-solution">
              <div id="coordsOutput" class="coords-output">
                Нажмите в любом месте
              </div>
            </div>
          </div>

          <div class="solution-wrapper">
            <h3 class="solution-title">Код функции:</h3>
            <button
              id="toggleCodeBtn5"
              class="toggle-code-btn"
              onclick="toggleFunctionCode('functionCode5', 'toggleCodeBtn5')"
            >
              Показать код
            </button>
            <pre id="functionCode5" class="code-block hidden">
function showCoords(e) {
    const x = e.clientX;
    const y = e.clientY;
    const target = e.target.tagName.toLowerCase();
    const output = document.getElementById('coordsOutput');
    output.textContent = 'X: ' + x + ', Y: ' + y + ' - ' + target;
}</pre
            >
          </div>
        </div>
      </div>
    </main>

    <script src="../partials/footer.js"></script>
    <script src="./tasks/task1/task1.js"></script>
    <script src="./tasks/task2/task2.js"></script>
    <script src="./tasks/task3/task3.js"></script>
    <script src="./tasks/task4/task4.js"></script>
    <script src="./tasks/task5/task5.js"></script>
    <script src="../index.js"></script>
  </body>
</html>
